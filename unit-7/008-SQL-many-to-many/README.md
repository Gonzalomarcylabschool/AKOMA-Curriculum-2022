# Many to Many

In yesterdays lecture we learned about the **One to Many** relationship that can occur in SQL. Lets take a look at an example of another **One to Many** relationship.

Here we have a table called instructors:

|instructor_id|instructor_name|
|--|--|
|1|Ben|
|2|Gonzalo|
|3|Jowel|


Here we have a table called fellows:

|fellow_id|fellow_name|teacher_id|
|--|--|--|
|1|Ashley|3|
|2|Ashley|2|
|3|Gabe|1|
|4|Vincent|2|
|5|Nayan|1|

Here is the ERD for these tables:
![](./Screenshot%202023-04-14%20at%208.43.42%20AM.png)
What are the primary keys and what are the foreign keys?
<details><summary>Answer</summary>
Primary keys:

For the fellows table it's 

</details>

### Quick note on keys:

Surrogate Keys: A surrogate key, on the other hand, is a primary key that is not based on any natural attribute of the entity, but is instead created solely for the purpose of identifying the record. Surrogate keys are typically integers generated by the database system, such as an auto-incrementing ID column.

Natural keys: A natural key is a primary key that is based on a unique attribute of the entity that the table represents. For example, in a table representing employees, the employee ID number could be a natural key. The natural key is often a value that is meaningful to the business and is already known, such as a customer's phone number or a product's SKU number.

Question: What kind of keys are we using on these tables?
<details><summary>Answer</summary>

Surrogate Keys

</details>

## Back to the tables
|instructor_id|instructor_name|fellow_id|fellow_name|teacher_id|
|--|--|--|--|--|
|1|Ben|3|Gabe|1|
|2|Gonzalo|4|Vincent|2|
|3|Jowel|1|Ashley|3|
|2|Gonzalo|2|Ashley|2|
|1|Ben|5|Nayan|1|

So what SQL code do use to make this table? 

<details><summary>Answer</summary>

SELECT * FROM instructors JOIN fellows ON instructors.instructor_id = fellow.teacher_id

</details>

## Many to Many 

In SQL, a many-to-many relationship is a type of relationship between two tables, where each record in one table can be associated with multiple records in the other table, and vice versa. This type of relationship requires a third table, called a junction table, to connect the two tables.

For example, consider a database that tracks the relationship between students and the courses they are enrolled in. A student can enroll in multiple courses, and a course can have multiple students. In this case, we would create three tables: a students table, a courses table, and a junction table to connect them.

![](https://www.datensen.com/blog/wp-content/uploads/2021/10/many-to-many-relationship-1.png)

The junction table, also known as an intersection table or a linking table, contains foreign keys that reference the primary keys of the two related tables. Each row in the junction table represents a pairing of a student with a course they are enrolled in.

Here is a simple ERD of Instagram:
![](https://www.sensedeep.com/images/blog/instagram-erd.avif)

Check out the [article](https://www.sensedeep.com/blog/posts/stories/building-instagram-with-dynamoDB-and-OneTable.html) where this came from!

